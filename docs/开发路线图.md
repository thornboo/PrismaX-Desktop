# 开发路线图

> 本文档描述 PrismaX 的版本规划与开发里程碑

---

## 版本概览

```
v0.1.0 (Web MVP)      v0.2.0 (Desktop)    v0.3.0              v0.4.0              v1.0.0
────────────────────────────────────────────────────────────────────────────────────────►
   │                     │                   │                   │                   │
   │ 基础对话            │ 桌面壳层          │ 知识库 RAG        │ Agent 系统        │ 正式发布
   │ 多模型支持          │ IPC/权限边界      │ 文档上传/解析     │ 工具调用          │ 插件市场
   │ 会话管理            │ 自动更新（可选）  │ 向量检索          │ MCP 协议          │ 云同步
   │ Web 持久化          │ 桌面存储适配      │ 上下文增强        │ 内置工具          │ 移动端
   │                     │                   │                   │ 插件系统基础      │
   └─ 4-6 周             └─ 3-5 周           └─ 4-6 周           └─ 6-8 周           └─ 持续迭代
```

---

## v0.1.0 - Web MVP

**目标：** 一个可用的 Web AI 对话应用，验证核心架构

**预计周期：** 4-6 周

### 功能范围

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 基础对话 | P0 | 单轮/多轮对话，流式响应 |
| 多模型支持 | P0 | OpenAI、Claude、Ollama |
| 会话管理 | P0 | 创建、删除、重命名、历史记录 |
| Web 持久化 | P0 | PostgreSQL 存储会话和消息 |
| API Key 管理 | P0 | 安全存储，支持多个提供商 |
| 基础设置 | P1 | 主题切换、默认模型、温度参数 |
| Markdown 渲染 | P1 | 代码高亮、数学公式 |
| 消息操作 | P1 | 复制、重新生成、编辑 |

### 开发计划

#### Week 1-2：项目基础

- [ ] Monorepo 初始化（pnpm + Turbo）
- [ ] Next.js Web 应用初始化
- [ ] tRPC 基础框架搭建
- [ ] 基础 UI 框架（shadcn/ui）
- [ ] PostgreSQL + Drizzle ORM 集成（Schema + 迁移）
- [ ] 状态管理（Zustand）

#### Week 3-4：核心功能

- [ ] AI SDK 封装（OpenAI、Claude、Ollama）
- [ ] 流式响应处理
- [ ] 会话 CRUD
- [ ] 消息列表渲染
- [ ] API Key 安全存储

#### Week 5-6：完善体验

- [ ] Markdown 渲染（代码高亮）
- [ ] 设置页面
- [ ] 主题切换
- [ ] 消息操作（复制、重新生成）
- [ ] Docker 部署测试（开发/生产）

---

## v0.2.0 - Desktop（Electron）

**目标：** 在复用 Web UI 的前提下，提供可分发的桌面应用外壳

**预计周期：** 3-5 周

### 功能范围

| 功能 | 说明 |
|------|------|
| Electron 壳层 | 主进程/预加载/窗口管理 |
| 渲染复用 | 复用 `apps/web` 作为渲染层（开发加载 dev server，生产加载构建产物） |
| IPC/权限边界 | 主进程能力通过 IPC 暴露，严格权限控制 |
| 自动更新（可选） | 先留开关，确保 MVP 路径可控 |
| 桌面存储适配（可选） | 桌面端可选 SQLite（与 Web 数据层隔离） |

---

## v0.3.0 - 知识库

**目标：** 支持文档上传和 RAG 检索增强

**预计周期：** 4-6 周

### 功能范围

| 功能 | 说明 |
|------|------|
| 文档上传 | 支持 PDF、TXT、MD、DOCX 格式 |
| 文档解析 | 文本提取与智能分块 |
| 向量嵌入 | 本地嵌入模型或 API |
| 向量存储 | SQLite + sqlite-vss |
| RAG 检索 | 相似度搜索与上下文增强 |
| 知识库管理 | 创建、删除、文档管理 UI |

### 开发计划

- [ ] 文档上传组件
- [ ] 文档解析器（PDF、DOCX 等）
- [ ] 文本分块策略
- [ ] 嵌入模型集成
- [ ] 向量数据库集成
- [ ] 检索 API 实现
- [ ] RAG 流程整合
- [ ] 知识库管理界面

---

## v0.4.0 - Agent 系统

**目标：** 支持工具调用和 Agent 能力

**预计周期：** 6-8 周

### 功能范围

| 功能 | 说明 |
|------|------|
| 工具调用框架 | Function Calling 支持 |
| 内置工具 | Web 搜索、URL 抓取、代码执行 |
| MCP 协议 | Model Context Protocol 客户端 |
| Agent 运行时 | ReAct 模式执行引擎 |
| 插件系统 | 基础插件架构 |
| 插件 API | Tool、UI、Storage API |

### 开发计划

- [ ] 工具定义与注册机制
- [ ] 工具执行器
- [ ] 内置工具实现
- [ ] MCP 客户端
- [ ] Agent 运行时
- [ ] 插件加载器
- [ ] 插件沙箱
- [ ] 插件 API 实现

---

## v1.0.0 - 正式发布

**目标：** 功能完整、稳定可靠的正式版本

### 功能范围

| 功能 | 说明 |
|------|------|
| 插件市场 | 插件发现、安装、更新 |
| 云同步 | 可选的数据同步服务 |
| Web 版 | 浏览器访问支持 |
| 助手系统 | 预设助手与自定义助手 |
| 多语言 | 国际化支持 |
| 性能优化 | 启动速度、内存占用优化 |

### 后续规划

- 移动端支持（React Native）
- 团队协作功能
- 企业版特性
- API 开放平台

---

## 技术栈版本

| 依赖 | 版本 | 说明 |
|------|------|------|
| Node.js | 20 LTS | 长期支持版本 |
| pnpm | 10.x | 包管理器 |
| Turbo | 2.x | Monorepo 构建 |
| Electron | 30.x | 最新稳定版 |
| Next.js | 15.x | App Router |
| React | 19.x | 稳定版 |
| TypeScript | 5.4+ | 最新特性 |
| Zustand | 4.x | 状态管理 |
| Drizzle ORM | 0.30+ | 数据库 ORM |
| better-sqlite3 | 11.x | SQLite 驱动 |
| shadcn/ui | latest | UI 组件 |
| Tailwind CSS | 3.4+ | 样式 |

---

## 里程碑检查点

### MVP 发布检查

- [ ] 核心功能完整
- [ ] 无阻塞性 Bug
- [ ] 基础文档完善
- [ ] macOS / Windows / Linux 打包测试
- [ ] 性能基准测试

### 正式发布检查

- [ ] 功能完整性验证
- [ ] 安全审计通过
- [ ] 性能优化完成
- [ ] 用户文档完善
- [ ] 自动更新机制
- [ ] 错误上报机制
