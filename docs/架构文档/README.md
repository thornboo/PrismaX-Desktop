# 架构文档

> 本目录包含 PrismaX-Desktop 桌面应用的系统架构设计文档

---

## 文档索引

| 文档                                 | 说明                                                        |
| ------------------------------------ | ----------------------------------------------------------- |
| [系统架构.md](./系统架构.md)         | 系统架构设计                                                |
| [数据库设计.md](./数据库设计.md)     | 数据库设计                                                  |
| [本地数据平台.md](./本地数据平台.md) | 知识库/索引/任务/插件边界（含 FTS5 + LanceDB 向量索引落地） |
| [消息流程.md](./消息流程.md)         | 消息处理流程                                                |
| [安全架构.md](./安全架构.md)         | 安全架构设计                                                |

---

## 架构概述

PrismaX-Desktop 采用 **Electron 双进程架构**，主进程负责系统集成和业务逻辑，渲染进程负责用户界面。

```
┌─────────────────────────────────────────────────────────────────────┐
│                        PrismaX Desktop                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│                        ┌─────────────────┐                          │
│                        │    用户界面      │                          │
│                        │  (Vite + React) │                          │
│                        └────────┬────────┘                          │
│                                 │                                   │
│                        ┌────────▼────────┐                          │
│                        │   状态管理       │                          │
│                        │   (Zustand)     │                          │
│                        └────────┬────────┘                          │
│                                 │                                   │
│                        ┌────────▼────────┐                          │
│                        │   IPC 通信层    │                          │
│                        │  (contextBridge)│                          │
│                        └────────┬────────┘                          │
│                                 │                                   │
│         ┌───────────────────────┼───────────────────────┐          │
│         │                       │                       │          │
│         ▼                       ▼                       ▼          │
│  ┌─────────────┐        ┌─────────────┐        ┌─────────────┐     │
│  │  业务服务   │        │   数据库    │        │   AI API    │     │
│  │ ChatService │        │   SQLite    │        │   调用      │     │
│  └─────────────┘        └─────────────┘        └─────────────┘     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 设计原则

1. **进程隔离** - 渲染进程沙箱化，通过 IPC 安全通信
2. **类型安全** - 全链路 TypeScript，端到端类型安全
3. **状态持久化** - Zustand + persist 中间件
4. **性能优先** - 流式响应、懒加载、缓存优化
5. **安全第一** - API Key 安全存储，输入验证
